import{X as t,o as s,c as e,w as a,n as l,b as o,t as n,A as u,a as c,e as r,f as d,j as i,i as f,S as p,d as _,g as k,k as y,a4 as m,l as h,h as x,u as v,F as g,r as w,a5 as b,a2 as S,E as C,B as D,m as T,p as I,s as F}from"./index-5ec5936b.js";import{_ as B}from"./_plugin-vue_export-helper.1b428a4d.js";import{u as j,_ as M}from"./index.b2979765.js";import{_ as z}from"./uni-popup.89915e28.js";import{O as H,g as q,o as N}from"./pay.02c2e520.js";import{c as $,d as A,e as J,f as O,h as P}from"./order.12210c51.js";import"./home.22da9104.js";import"./http.232d223e.js";const R={en:{"uni-countdown.day":"day","uni-countdown.h":"h","uni-countdown.m":"m","uni-countdown.s":"s"},"zh-Hans":{"uni-countdown.day":"天","uni-countdown.h":"时","uni-countdown.m":"分","uni-countdown.s":"秒"},"zh-Hant":{"uni-countdown.day":"天","uni-countdown.h":"時","uni-countdown.m":"分","uni-countdown.s":"秒"}},{t:U}=t(R);const K=B({name:"UniCountdown",emits:["timeup"],props:{showDay:{type:Boolean,default:!0},showColon:{type:Boolean,default:!0},start:{type:Boolean,default:!0},backgroundColor:{type:String,default:""},color:{type:String,default:"#333"},fontSize:{type:Number,default:14},splitorColor:{type:String,default:"#333"},day:{type:Number,default:0},hour:{type:Number,default:0},minute:{type:Number,default:0},second:{type:Number,default:0},timestamp:{type:Number,default:0}},data:()=>({timer:null,syncFlag:!1,d:"00",h:"00",i:"00",s:"00",leftTime:0,seconds:0}),computed:{dayText:()=>U("uni-countdown.day"),hourText:t=>U("uni-countdown.h"),minuteText:t=>U("uni-countdown.m"),secondText:t=>U("uni-countdown.s"),timeStyle(){const{color:t,backgroundColor:s,fontSize:e}=this;return{color:t,backgroundColor:s,fontSize:`${e}px`,width:22*e/14+"px",lineHeight:20*e/14+"px",borderRadius:3*e/14+"px"}},splitorStyle(){const{splitorColor:t,fontSize:s,backgroundColor:e}=this;return{color:t,fontSize:12*s/14+"px",margin:e?4*s/14+"px":""}}},watch:{day(t){this.changeFlag()},hour(t){this.changeFlag()},minute(t){this.changeFlag()},second(t){this.changeFlag()},start:{immediate:!0,handler(t,s){if(t)this.startData();else{if(!s)return;clearInterval(this.timer)}}}},created:function(t){this.seconds=this.toSeconds(this.timestamp,this.day,this.hour,this.minute,this.second),this.countDown()},unmounted(){clearInterval(this.timer)},methods:{toSeconds:(t,s,e,a,l)=>t?t-parseInt((new Date).getTime()/1e3,10):60*s*60*24+60*e*60+60*a+l,timeUp(){clearInterval(this.timer),this.$emit("timeup")},countDown(){let t=this.seconds,[s,e,a,l]=[0,0,0,0];t>0?(s=Math.floor(t/86400),e=Math.floor(t/3600)-24*s,a=Math.floor(t/60)-24*s*60-60*e,l=Math.floor(t)-24*s*60*60-60*e*60-60*a):this.timeUp(),s<10&&(s="0"+s),e<10&&(e="0"+e),a<10&&(a="0"+a),l<10&&(l="0"+l),this.d=s,this.h=e,this.i=a,this.s=l},startData(){if(this.seconds=this.toSeconds(this.timestamp,this.day,this.hour,this.minute,this.second),this.seconds<=0)return this.seconds=this.toSeconds(0,0,0,0,0),void this.countDown();clearInterval(this.timer),this.countDown(),this.timer=setInterval((()=>{this.seconds--,this.seconds<0?this.timeUp():this.countDown()}),1e3)},update(){this.startData()},changeFlag(){this.syncFlag||(this.seconds=this.toSeconds(this.timestamp,this.day,this.hour,this.minute,this.second),this.startData(),this.syncFlag=!0)}}},[["render",function(t,i,f,p,_,k){const y=r,m=d;return s(),e(m,{class:"uni-countdown"},{default:a((()=>[f.showDay?(s(),e(y,{key:0,style:l([k.timeStyle]),class:"uni-countdown__number"},{default:a((()=>[o(n(_.d),1)])),_:1},8,["style"])):u("",!0),f.showDay?(s(),e(y,{key:1,style:l([k.splitorStyle]),class:"uni-countdown__splitor"},{default:a((()=>[o(n(k.dayText),1)])),_:1},8,["style"])):u("",!0),c(y,{style:l([k.timeStyle]),class:"uni-countdown__number"},{default:a((()=>[o(n(_.h),1)])),_:1},8,["style"]),c(y,{style:l([k.splitorStyle]),class:"uni-countdown__splitor"},{default:a((()=>[o(n(f.showColon?":":k.hourText),1)])),_:1},8,["style"]),c(y,{style:l([k.timeStyle]),class:"uni-countdown__number"},{default:a((()=>[o(n(_.i),1)])),_:1},8,["style"]),c(y,{style:l([k.splitorStyle]),class:"uni-countdown__splitor"},{default:a((()=>[o(n(f.showColon?":":k.minuteText),1)])),_:1},8,["style"]),c(y,{style:l([k.timeStyle]),class:"uni-countdown__number"},{default:a((()=>[o(n(_.s),1)])),_:1},8,["style"]),f.showColon?u("",!0):(s(),e(y,{key:2,style:l([k.splitorStyle]),class:"uni-countdown__splitor"},{default:a((()=>[o(n(k.secondText),1)])),_:1},8,["style"]))])),_:1})}],["__scopeId","data-v-1acab939"]]);const X=B({},[["render",function(t,l){const n=d,u=i,_=f,k=r,y=p;return s(),e(n,{class:"sk-container"},{default:a((()=>[c(y,{"scroll-y":!0,class:"viewport sk-transparent",id:"scroller","enable-back-to-top":!0},{default:a((()=>[c(n,{class:"overview sk-image",style:{"padding-top":"64px"}},{default:a((()=>[c(n,{class:"status sk-transparent sk-text-0-0000-826 sk-text"},{default:a((()=>[o("待收货")])),_:1})])),_:1}),c(n,{class:"shipment"},{default:a((()=>[c(u,{class:"logistics sk-image sk-pseudo sk-pseudo-circle","hover-class":"none"},{default:a((()=>[c(n,{class:"message sk-transparent sk-text-14-2857-512 sk-text"},{default:a((()=>[o("小兔兔到了小福家里，请签收")])),_:1}),c(n,{class:"date sk-transparent sk-text-14-2857-990 sk-text"},{default:a((()=>[o("2023-04-15 23:23:04")])),_:1})])),_:1}),c(n,{class:"locate sk-image"},{default:a((()=>[c(n,{class:"user sk-transparent sk-text-14-2857-630 sk-text"},{default:a((()=>[o("苏东坡 13633336666")])),_:1}),c(n,{class:"address sk-transparent sk-text-14-2857-606 sk-text"},{default:a((()=>[o("广东省 广州市 天河区吉山幼儿园")])),_:1})])),_:1})])),_:1}),c(n,{class:"goods"},{default:a((()=>[c(n,{class:"item"},{default:a((()=>[c(u,{class:"navigator","hover-class":"none"},{default:a((()=>[c(_,{class:"cover sk-image"}),c(n,{class:"meta"},{default:a((()=>[c(n,{class:"name ellipsis sk-transparent sk-text-14-2857-474 sk-text"},{default:a((()=>[o("厚厚一按就干爽，埃及进口长绒棉毛巾")])),_:1}),c(n,{class:"type sk-transparent sk-text-22-2222-237 sk-text"},{default:a((()=>[o("超值4条装（灰蓝色+粉色+银灰+嫩黄）")])),_:1}),c(n,{class:"price"},{default:a((()=>[c(n,{class:"actual"},{default:a((()=>[c(k,{class:"symbol sk-transparent sk-opacity"},{default:a((()=>[o("¥")])),_:1}),c(k,{class:"sk-transparent sk-text-14-2857-102 sk-text"},{default:a((()=>[o("68")])),_:1})])),_:1})])),_:1}),c(n,{class:"quantity sk-transparent sk-opacity"},{default:a((()=>[o("x1")])),_:1})])),_:1})])),_:1}),c(u,{class:"navigator","hover-class":"none"},{default:a((()=>[c(_,{class:"cover sk-image"}),c(n,{class:"meta"},{default:a((()=>[c(n,{class:"name ellipsis sk-transparent sk-text-14-2857-969 sk-text"},{default:a((()=>[o("KJE金属色系轻量电动车骑行盔男女通用")])),_:1}),c(n,{class:"type sk-transparent sk-text-22-2222-510 sk-text"},{default:a((()=>[o("玫瑰金L")])),_:1}),c(n,{class:"price"},{default:a((()=>[c(n,{class:"actual"},{default:a((()=>[c(k,{class:"symbol sk-transparent sk-opacity"},{default:a((()=>[o("¥")])),_:1}),c(k,{class:"sk-transparent sk-text-14-2857-431 sk-text"},{default:a((()=>[o("120")])),_:1})])),_:1})])),_:1}),c(n,{class:"quantity sk-transparent sk-opacity"},{default:a((()=>[o("x1")])),_:1})])),_:1})])),_:1}),c(u,{class:"navigator","hover-class":"none"},{default:a((()=>[c(_,{class:"cover sk-image"}),c(n,{class:"meta"},{default:a((()=>[c(n,{class:"name ellipsis sk-transparent sk-text-14-2857-130 sk-text"},{default:a((()=>[o("源自澳洲进口羊毛，儿童奢暖羊毛被升级款")])),_:1}),c(n,{class:"type sk-transparent sk-text-22-2222-110 sk-text"},{default:a((()=>[o("春秋款， 100%羊毛款：150x200cm，适合1.2米/1.35米床")])),_:1}),c(n,{class:"price"},{default:a((()=>[c(n,{class:"actual"},{default:a((()=>[c(k,{class:"symbol sk-transparent sk-opacity"},{default:a((()=>[o("¥")])),_:1}),c(k,{class:"sk-transparent sk-text-14-2857-273 sk-text"},{default:a((()=>[o("289")])),_:1})])),_:1})])),_:1}),c(n,{class:"quantity sk-transparent sk-opacity"},{default:a((()=>[o("x1")])),_:1})])),_:1})])),_:1})])),_:1}),c(n,{class:"total"},{default:a((()=>[c(n,{class:"row"},{default:a((()=>[c(n,{class:"text sk-transparent sk-text-0-0000-302 sk-text"},{default:a((()=>[o("商品总价: ")])),_:1}),c(n,{class:"symbol sk-transparent sk-text-0-0000-998 sk-text sk-pseudo sk-pseudo-circle"},{default:a((()=>[o("477")])),_:1})])),_:1}),c(n,{class:"row"},{default:a((()=>[c(n,{class:"text sk-transparent sk-text-0-0000-912 sk-text"},{default:a((()=>[o("运费: ")])),_:1}),c(n,{class:"symbol sk-transparent sk-text-0-0000-208 sk-text sk-pseudo sk-pseudo-circle"},{default:a((()=>[o("2")])),_:1})])),_:1}),c(n,{class:"row"},{default:a((()=>[c(n,{class:"text sk-transparent sk-text-0-0000-538 sk-text"},{default:a((()=>[o("应付金额: ")])),_:1}),c(n,{class:"symbol primary sk-transparent sk-text-0-0000-858 sk-text sk-pseudo sk-pseudo-circle"},{default:a((()=>[o("479")])),_:1})])),_:1})])),_:1})])),_:1}),c(n,{class:"detail"},{default:a((()=>[c(n,{class:"title sk-transparent sk-text-0-0000-66 sk-text"},{default:a((()=>[o("订单信息")])),_:1}),c(n,{class:"row"},{default:a((()=>[c(n,{class:"item sk-transparent"},{default:a((()=>[o(" 订单编号: 1645809639951962113 "),c(k,{class:"copy sk-transparent sk-text-0-0000-522 sk-text"},{default:a((()=>[o("复制")])),_:1})])),_:1}),c(n,{class:"item sk-transparent sk-text-0-0000-353 sk-text"},{default:a((()=>[o("下单时间: 2023-04-11 23:22:50")])),_:1})])),_:1})])),_:1}),c(n,{class:"toolbar",style:{"padding-bottom":"34px"}},{default:a((()=>[c(n,{class:"button primary sk-transparent sk-text-31-9444-411 sk-text",style:{"background-position-x":"50%"}},{default:a((()=>[o("再次购买")])),_:1})])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-31eaea46"]]),E=B(_({__name:"detail",props:{id:null},setup(t){const _=t,{safeAreaInsets:B}=k(),{guessRef:R,onScrolltolower:U}=j(),E=y(),Y=y(["商品无货","不想要了","商品信息填错了","地址信息填写错误","商品降价","其它"]),G=y(""),L=m(),Q=y(),W=y([]),V=async()=>{const t=await A(_.id);W.value=t.result.list};h((()=>{(async()=>{const t=await $(_.id);Q.value=t.result,[H.DaiShouHuo,H.DaiPingJia,H.YiWanCheng].includes(Q.value.orderState)&&V()})()}));const Z=()=>{Q.value.orderState=H.YiQuXiao},tt=async()=>{await q({orderId:_.id}),S({url:`/pagesOrder/payment/payment?id=${_.id}`})},st=async()=>{},et=()=>{C({content:"为保障您的权益，请收到货并确认无误后，再确认收货",confirmColor:"#27BA9B",success:async t=>{if(t.confirm){const t=await J(_.id);Q.value=t.result}}})},at=()=>{C({content:"是否删除订单",confirmColor:"#27BA9B",success:async t=>{t.confirm&&(await O({ids:[_.id]}),S({url:"/pagesOrder/list/list"}))}})},lt=async()=>{var t;const s=await P(_.id,{cancelReason:G.value});Q.value=s.result,null==(t=E.value)||t.close(),D({icon:"none",title:"订单取消成功"})};return(t,k)=>{var y;const m=i,h=d,S=r,C=T(I("uni-countdown"),K),D=f,j=T(I("XtxGuess"),M),q=p,$=T(I("uni-popup"),z);return s(),x(g,null,[c(h,{class:"navbar",style:l({paddingTop:(null==(y=v(B))?void 0:y.top)+"px"})},{default:a((()=>[c(h,{class:"wrap"},{default:a((()=>[v(L).length>1?(s(),e(m,{key:0,"open-type":"navigateBack",class:"back icon-left"})):(s(),e(m,{key:1,url:"/pages/index/index","open-type":"switchTab",class:"back icon-home"})),c(h,{class:"title"},{default:a((()=>[o("订单详情")])),_:1})])),_:1})])),_:1},8,["style"]),c(q,{"enable-back-to-top":"","scroll-y":"",class:"viewport",id:"scroller",onScrolltolower:v(U)},{default:a((()=>{var t,r;return[Q.value?(s(),x(g,{key:0},[c(h,{class:"overview",style:l({paddingTop:v(B).top+20+"px"})},{default:a((()=>[Q.value.orderState===v(H).DaiFuKuan?(s(),x(g,{key:0},[c(h,{class:"status icon-clock"},{default:a((()=>[o("等待付款")])),_:1}),c(h,{class:"tips"},{default:a((()=>[c(S,{class:"money"},{default:a((()=>[o("应付金额: ¥ "+n(Q.value.payMoney),1)])),_:1}),c(S,{class:"time"},{default:a((()=>[o("支付剩余")])),_:1}),c(C,{second:Q.value.countdown,color:"#fff","splitor-color":"#fff","show-day":!1,"show-colon":!1,onTimeup:Z},null,8,["second"])])),_:1}),c(h,{class:"button",onClick:tt},{default:a((()=>[o("去支付")])),_:1})],64)):(s(),x(g,{key:1},[c(h,{class:"status"},{default:a((()=>[o(n(v(N)[Q.value.orderState].text),1)])),_:1}),c(h,{class:"button-group"},{default:a((()=>[c(m,{class:"button",url:`/pagesOrder/create/create?orderId=${_.id}`,"hover-class":"none"},{default:a((()=>[o(" 再次购买 ")])),_:1},8,["url"]),v(false)&&Q.value.orderState==v(H).DaiFaHuo?(s(),e(h,{key:0,onClick:st,class:"button"},{default:a((()=>[o(" 模拟发货 ")])),_:1})):u("",!0),Q.value.orderState===v(H).DaiShouHuo?(s(),e(h,{key:1,onClick:et,class:"button"},{default:a((()=>[o(" 确认收货 ")])),_:1})):u("",!0)])),_:1})],64))])),_:1},8,["style"]),c(h,{class:"shipment"},{default:a((()=>[(s(!0),x(g,null,w(W.value,(t=>(s(),e(h,{key:t.id,class:"item"},{default:a((()=>[c(h,{class:"message"},{default:a((()=>[o(n(t.text),1)])),_:2},1024),c(h,{class:"date"},{default:a((()=>[o(n(t.time),1)])),_:2},1024)])),_:2},1024)))),128)),c(h,{class:"locate"},{default:a((()=>[c(h,{class:"user"},{default:a((()=>[o(n(Q.value.receiverContact)+" "+n(Q.value.receiverMobile),1)])),_:1}),c(h,{class:"address"},{default:a((()=>[o(n(Q.value.receiverAddress),1)])),_:1})])),_:1})])),_:1}),c(h,{class:"goods"},{default:a((()=>[c(h,{class:"item"},{default:a((()=>[(s(!0),x(g,null,w(Q.value.skus,(t=>(s(),e(m,{class:"navigator",key:t.id,url:`/pages/goods/goods?id=${t.spuId}`,"hover-class":"none"},{default:a((()=>[c(D,{class:"cover",src:t.image},null,8,["src"]),c(h,{class:"meta"},{default:a((()=>[c(h,{class:"name ellipsis"},{default:a((()=>[o(n(t.name),1)])),_:2},1024),c(h,{class:"type"},{default:a((()=>[o(n(t.attrsText),1)])),_:2},1024),c(h,{class:"price"},{default:a((()=>[c(h,{class:"actual"},{default:a((()=>[c(S,{class:"symbol"},{default:a((()=>[o("¥")])),_:1}),c(S,null,{default:a((()=>[o(n(t.curPrice),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),c(h,{class:"quantity"},{default:a((()=>[o("x"+n(t.quantity),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["url"])))),128)),Q.value.orderState===v(H).DaiPingJia?(s(),e(h,{key:0,class:"action"},{default:a((()=>[c(h,{class:"button primary"},{default:a((()=>[o("申请售后")])),_:1}),c(m,{url:"",class:"button"},{default:a((()=>[o(" 去评价 ")])),_:1})])),_:1})):u("",!0)])),_:1}),c(h,{class:"total"},{default:a((()=>[c(h,{class:"row"},{default:a((()=>[c(h,{class:"text"},{default:a((()=>[o("商品总价: ")])),_:1}),c(h,{class:"symbol"},{default:a((()=>[o(n(Q.value.totalMoney),1)])),_:1})])),_:1}),c(h,{class:"row"},{default:a((()=>[c(h,{class:"text"},{default:a((()=>[o("运费: ")])),_:1}),c(h,{class:"symbol"},{default:a((()=>[o(n(Q.value.postFee),1)])),_:1})])),_:1}),c(h,{class:"row"},{default:a((()=>[c(h,{class:"text"},{default:a((()=>[o("应付金额: ")])),_:1}),c(h,{class:"symbol primary"},{default:a((()=>[o(n(Q.value.payMoney),1)])),_:1})])),_:1})])),_:1})])),_:1}),c(h,{class:"detail"},{default:a((()=>[c(h,{class:"title"},{default:a((()=>[o("订单信息")])),_:1}),c(h,{class:"row"},{default:a((()=>[c(h,{class:"item"},{default:a((()=>[o(" 订单编号: "+n(_.id)+" ",1),c(S,{class:"copy",onClick:k[0]||(k[0]=t=>{return s=_.id,void b({data:s});var s})},{default:a((()=>[o("复制")])),_:1})])),_:1}),c(h,{class:"item"},{default:a((()=>[o("下单时间: "+n(Q.value.createTime),1)])),_:1})])),_:1})])),_:1}),c(j,{ref_key:"guessRef",ref:R},null,512),c(h,{class:"toolbar-height",style:l({paddingBottom:(null==(t=v(B))?void 0:t.bottom)+"px"})},null,8,["style"]),c(h,{class:"toolbar",style:l({paddingBottom:(null==(r=v(B))?void 0:r.bottom)+"px"})},{default:a((()=>[Q.value.orderState===v(H).DaiFuKuan?(s(),x(g,{key:0},[c(h,{class:"button primary",onClick:tt},{default:a((()=>[o(" 去支付 ")])),_:1}),c(h,{class:"button",onClick:k[1]||(k[1]=t=>{var s,e;return null==(e=null==(s=E.value)?void 0:s.open)?void 0:e.call(s)})},{default:a((()=>[o(" 取消订单 ")])),_:1})],64)):(s(),x(g,{key:1},[c(m,{class:"button secondary",url:`/pagesOrder/create/create?orderId=${_.id}`,"hover-class":"none"},{default:a((()=>[o(" 再次购买 ")])),_:1},8,["url"]),Q.value.orderState===v(H).DaiShouHuo?(s(),e(h,{key:0,class:"button primary",onClick:et},{default:a((()=>[o(" 确认收货 ")])),_:1})):u("",!0),Q.value.orderState===v(H).DaiPingJia?(s(),e(h,{key:1,class:"button"},{default:a((()=>[o(" 去评价 ")])),_:1})):u("",!0),Q.value.orderState>=v(H).DaiPingJia?(s(),e(h,{key:2,class:"button delete",onClick:at},{default:a((()=>[o(" 删除订单 ")])),_:1})):u("",!0)],64))])),_:1},8,["style"])],64)):(s(),e(X,{key:1}))]})),_:1},8,["onScrolltolower"]),c($,{ref_key:"popup",ref:E,type:"bottom","background-color":"#fff"},{default:a((()=>[c(h,{class:"popup-root"},{default:a((()=>[c(h,{class:"title"},{default:a((()=>[o("订单取消")])),_:1}),c(h,{class:"description"},{default:a((()=>[c(h,{class:"tips"},{default:a((()=>[o("请选择取消订单的原因：")])),_:1}),(s(!0),x(g,null,w(Y.value,(t=>(s(),e(h,{class:"cell",key:t,onClick:s=>G.value=t},{default:a((()=>[c(S,{class:"text"},{default:a((()=>[o(n(t),1)])),_:2},1024),c(S,{class:F(["icon",{checked:t===G.value}])},null,8,["class"])])),_:2},1032,["onClick"])))),128))])),_:1}),c(h,{class:"footer"},{default:a((()=>[c(h,{class:"button",onClick:k[2]||(k[2]=t=>{var s,e;return null==(e=null==(s=E.value)?void 0:s.close)?void 0:e.call(s)})},{default:a((()=>[o("取消")])),_:1}),c(h,{class:"button primary",onClick:lt},{default:a((()=>[o("确认")])),_:1})])),_:1})])),_:1})])),_:1},512)],64)}}}),[["__scopeId","data-v-787db87c"]]);export{E as default};
